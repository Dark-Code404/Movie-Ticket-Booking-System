{% extends "base.html" %}

{% block title %}Admin Dashboard{%  endblock %}

{% block content %}
{% if messages %}
<div class="alert alert-warning alert-dismissible fade show" role="alert">
    {% for message in messages %}
    <strong class="text-danger">{{ message }}</strong>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    {% endfor %}
</div>
{% endif %}
<div class="container mt-5 text-white">
    <h1>Admin Dashboard</h1>
    <h3>Total Income: ${{ totalIncome }}</h3>

    <h2>Booking History</h2>
    <table class="table table-striped text-white">
        <thead  >
            <tr>
                <th>User</th>
                <th>Showtime</th>
                <th>Date</th>
                <th>Seats</th>
                <th>Total Price</th>
            </tr>
        </thead>
        <tbody >
            {% for booking in bookings %}
            <tr class="text-white">
                <td class="text-white">{{ booking.user.username }}</td>
                <td>{{ booking.showtime }}</td>
                <td>{{ booking.show_date.date }}</td>
                <td>{{ booking.user_seat_as_list|join:", " }}</td>
                <td>${{ booking.total_price }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5">No bookings found</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
